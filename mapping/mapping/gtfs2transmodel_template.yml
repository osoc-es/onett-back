prefixes:
  trm: https://w3id.org/transmodel/terms#
  geo: http://www.w3.org/2003/01/geo/wgs84_pos#
  dct: http://purl.org/dc/terms/
  foaf: http://xmlns.com/foaf/0.1/
  schema: http://schema.org/

mappings:
#agency
  agency:
    sources:
      - ['../gtfs/agency.csv~csv']
      #URI example template
    s: https://w3id.org/transmodel/resource/[country]/[city]/[transport]/authority/$(agency_id)
    po:
      - [a, trm:authority]
      - [trm:uthorityName, $(agency_name)]
      - [trm:agencyUrl, $(agency_url)]
      - [trm:authorityTimezone ,$(agency_timezone)]
      - [trm:authorityLang,$(agency_lang)]
#      - [trm:fareUrl, $(agency_fare_url)]
#      - [trm:email , $(agency_email)]

#calendar
  calendar:
    sources:
      - ['../gtfs/calendar.csv~csv']
    s: https://w3id.org/transmodel/resource/service/$(service_id)
    po:
      - [a, trm:ServiceCalendarFrame]
      - [trm:DaysOfWeek, $(monday)]
      - [trm:DaysOfWeek, $(tuesday)]
      - [trm:DaysOfWeek, $(wednesday)]
      - [trm:DaysOfWeek, $(thursday)]
      - [trm:DaysOfWeek, $(friday)]
      - [trm:DaysOfWeek, $(saturday)]
      - [trm:FromDate, $(start_date)]
      - [trm:ToDate, $(end_date)]

#calendar_dates
  calendar_dates:
    sources:
      - ['../gtfs/calendar_dates.csv~csv']
    s: https://w3id.org/transmodel/resource/dates/$(service_id)
    po:
      - [a, trm:ServiceCalendarFrame]
      - [trm:ToDate, $(date)]
      - [trm:IsAvailable, $(exception_type)]

#fare_attributes
  fare_attributes:
    sources:
      - ['../gtfs/fare_attributes.csv~csv']
    s: https://w3id.org/transmodel/resource/fare_attributes/$(fare_id)
    po:
      - [a, trm:FareProduct]
      - [trm:FareProductPrice, $(price)]
      - [trm:Currency, $(currency_type)]
      - [trm:ChargingMoment, $(payment_method)]
      - [trm:transfers, $(transfers)]
      - [trm:StandardDuration, $(transfer_duration)]

#fare_rules
  fare_rules:
    sources:
      - ['../gtfs/fare_rules.csv~csv']
    s: https://w3id.org/transmodel/resource/fare_rules/$(fare_id)
    po:
      - [a, trm:FareProduct]
      - [trm:GroupOfLinesRef , $(route_id)]
      - [trm:AuthorityRef , $(route_id)]
      - [trm:StartTariffZoneRef , $(origin_id)]
      - [trm:EndTariffZoneRef , $(destination_id)]
      - [trm:TariffZoneRef , $(contains_id)]

#feed_info
  feed_info:
    sources:
      - ['../gtfs/feed_info.csv~csv']
    s: https://w3id.org/transmodel/resource/feed/$(feed_publisher_name)
    po:
      - [dct:publisher,$(feed_publisher_name)]
      - [foaf:page,$(feed_publisher_url)]
      - [dct:language ,$(feed_lang)]
      - [schema:startDate ,$(feed_start_date)]
      - [schema:endDate ,$(feed_end_date)]
      - [schema:version ,$(feed_version)]
      - [schema:ContactPoint,$(feed_contact_email)]
      - [schema:ContactPoint,$(feed_contact_url)]


#shapes
  shapes:
    sources:
      - ['../gtfs/shapes.csv~csv']
    s: https://w3id.org/transmodel/resource/shapes/$(shape_id)
    po:
    - [geo:lat ,$(shape_pt_lat)]
    - [geo:long ,$(shape_pt_lon)]
    - [trm:sequence ,$(shape_pt_sequence)]
    - [trm:distance ,$(shape_dist_traveled)]

#stops
  stops:
    sources:
      - ['../gtfs/stops.csv~csv']
    s: https://w3id.org/transmodel/resource/stops/$(stop_id)
    po:
      - [a, trm:ScheduledStopPoint]
      - [trm:PublicCode , $(stop_code)]
      - [trm:Name , $(stop_name)]
      - [trm:Description , $(stop_desc)]
      - [trm:Latitude , $(stop_lat)]
      - [trm:Longitude , $(stop_lon)]
      - [trm:TariffZoneRef , $(zone_id)]
      - [trm:Url , $(stop_url)]
      - [trm:StopPlace , $(location_type)]
#trips
  trips:
    sources:
      - ['../gtfs/trips.csv~csv']
    s: https://w3id.org/transmodel/resource/trips/$(trip_id)
    po:
      - [a, trm:ServiceJourney]
      - [trm:lineRef, $(route_id)]
      - [trm:DayTypeRef, $(service_id)]
      - [trm:DestinationDisplayView, $(trip_headsign)]
      - [trm:DirectionRef, $(direction_id)]
      - [trm:BlockRef , $(block_id)]
      - p: trm:service
        o:
          - mapping: calendar
            condition:
              function: equal
              parameters:
                - [str1, $(service_id)]
                - [str2, $(service_id)]
          - mapping: calendar_dates
            condition:
              function: equal
              parameters:
                - [str1, $(service_id)]
                - [str2, $(service_id)]
      - p: trm:route
        o:
          - mapping: routes
            condition:
              function: equal
              parameters:
                - [str1, $(route_id)]
                - [str2, $(route_id)]
      - p: trm:shape
        o:
          - mapping: shapes
            condition:
              function: equal
              parameters:
                - [str1, $(shape_id)]
                - [str2, $(shape_id)]

#routes

  routes:
    sources:
      - ['../gtfs/routes.csv~csv']
    s: https://w3id.org/transmodel/resource/routes/$(route_id)
    po:
      - [a, trm:Line]
      - [trm:shortName, $(route_short_name)]
      - [trm:name, $(route_long_name)]
      - [trm:description, $(route_desc)]
#      - [trm:, $(route_type)]--> digitos de 0-7 que representa el tipo de transporte
      - [trm:Url, $(route_url)]
      - [trm:Colour, $(route_color)]
      - [trm:TextColour, $(route_text_color)]
      - p: trm:agency
        o:
          - mapping: agency
            condition:
              function: equal
              parameters:
                - [str1, $(agency_id)]
                - [str2, $(agency_id)]

#frequencies
  frequencies:
    sources:
      - ['../gtfs/frequencies.csv~csv']
    s: https://w3id.org/transmodel/resource/frequency/$(start_time)
    po:
      - [a, trm:Frequency]
      - [trm:FirstDepartureTime ,$(start_time)]
      - [trm:LastDepartureTime,$(end_time)]
      - [trm:ScheduledHeadwayInterval,$(headway_secs)]
      - [trm:exactTimes,$(exact_time)]
      - p: trm:trip
        o:
          - mapping: trips
            condition:
              function: equal
              parameters:
                - [str1, $(trip_id)]
                - [str2, $(trip_id)]
#stop_times
  stop_times:
    sources:
      - ['../gtfs/stop_times.csv~csv']
    s: https://w3id.org/transmodel/resource/stop_times/$(trip_id)
    po:
      - [a, trm:ServiceJourney]
      - [trm:arrivalTime , $(arrival_time)]
      - [trm:Departure , $(departure_time)]
      - [trm:ScheduledStopPointRef , $(stop_id)]
      - [trm:stopSequence , $(stop_sequence)]
      - [trm:DestinationDisplayView , $(stop_headsign)]
      - [trm:ForBoarding , $(pickup_type)]
      - [trm:ForAlighting , $(drop_off_type)]
      - [trm:OnwardLink , $(shape_dist_traveled)]
      - [trm:TariffZoneRef , $(timepoint)]
      - p: trm:trip
        o:
          - mapping: trips
            condition:
              function: equal
              parameters:
                - [str1, $(trip_id)]
                - [str2, $(trip_id)]
      - p: trm:stop
        o:
          - mapping: stops
            condition:
              function: equal
              parameters:
                - [str1, $(stop_id)]
                - [str2, $(stop_id)]


#transfers. REVISE
  transfers:
    sources:
      -['../gtfs/transfers.csv~csv']
    s: https://w3id.org/transmodel/resource/transfers/$(from_stop_id)
    po:
      - [a, trm:Connection] #revise ID here there are two of them in transfers
      - [trm:FromPointRef, $(from_stop_id)]
      - [trm:ToPointRef, $(to_stop_id)]
        # - [trm:, $(transfer_type)]--> digits from 0-3 represents type of transfer
      - [trm:LineRef, $(min_transfer_time)]
      - p: trm:FromPointRef
        o:
          - mapping: stops
            condition:
              function: equal
              parameters:
                - [str1, $(stop_id)]
                - [str2, $(stop_id)]
      - p: trm:ToPointRef
        o:
          - mapping: stops
            condition:
              function: equal
              parameters:
                - [str1, $(stop_id)]
                - [str2, $(stop_id)]

#pathways. REVISE
# trm translation is based on self sense of what could be the real translation.
  pathways:
    sources:
      - ['../gtfs/pathways.csv~csv']
    s: https://w3id.org/transmodel/resource/pathways/$(pathways_id)
    po:
      - [a, trm:]
      - [trm:FromPointRef, $(from_stop_id)] #ID referenced to stops_id
      - [trm:ToPointRef, $(to_stop_id)]  #ID referenced to stops.stops_id
      # -[trm:, $(pathway_mode)] --> digits from 1-7 represents mode of pathways
      # -[trm:, $(is_bidirectional)] --> digits from 0-1 represents the direction of pathway
      - [trm:Lenght, $(length)]
      - [trm:TransversalTime, $(transversal_time)]
      - [trm:Stairs, $(stair_count)]
      - [trm:Slope, $(max_slope)]
      - [trm:Width, $(min_width)]
      - [trm:Signposted, $(signposted_as)]
      - [trm:SignpostedRev, $(reversed_signposted_as)]
      - p: trm:FromPointRef
        o:
          - mapping: stops
            condition:
              function: equal
              parameters:
                - [str1, $(stop_id)]
                - [str2, $(stop_id)]
      - p: trm:ToPointRef
        o:
          - mapping: stops
            condition:
              function: equal
              parameters:
                - [str1, $(stop_id)]
                - [str2, $(stop_id)]

# levels. REVISE

  levels:
    sources:
      - ['../gtfs/levels.csv~csv']
    s: https://w3id.org/transmodel/resource/levels/$(level_id)
    po:
      - [a, trm:]
      - [trm:LevelIndex, $(level_index)]  #ID referenced to stops.stops_id
      - [trm:LevelName, $(level_name)]
